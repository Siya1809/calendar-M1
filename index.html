<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Calendrier Master 1</title>
    <meta name="description" content="Calendrier d'examens Master 1 - CC, Examens, TPN">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>📅</text></svg>">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Menu hamburger -->
    <button class="menu-toggle" id="menuToggle" aria-label="Menu">
        <span class="hamburger"></span>
        <span class="hamburger"></span>
        <span class="hamburger"></span>
    </button>

    <!-- Menu latéral -->
    <nav class="side-menu" id="sideMenu">
        <div class="menu-header">
            <h3>Menu</h3>
            <button class="menu-close" id="menuClose">×</button>
        </div>
        
        <div class="menu-content">
            <!-- Navigation rapide -->
            <div class="menu-section">
                <h4>🎯 Navigation</h4>
                <button class="menu-item" data-action="scrollToNext">
                    <span class="menu-icon">⏰</span>
                    <span class="menu-text">Prochain examen</span>
                </button>
                <button class="menu-item" data-action="scrollToList">
                    <span class="menu-icon">📋</span>
                    <span class="menu-text">Liste des examens</span>
                </button>
                <button class="menu-item" data-action="scrollToCalendar">
                    <span class="menu-icon">📅</span>
                    <span class="menu-text">Vue calendrier</span>
                </button>
            </div>

            <!-- Accès rapide aux cours -->
            <div class="menu-section">
                <h4>🌐 Liens des cours</h4>
                <div id="menuQuickLinks" class="menu-links">
                    <div class="menu-loading">Chargement...</div>
                </div>
            </div>

            <!-- Filtres -->
            <div class="menu-section">
                <h4>🎯 Filtrer par UE</h4>
                <select id="menuUeFilter" class="menu-select">
                    <option value="">Toutes les UE</option>
                </select>
            </div>

            <!-- Actions -->
            <div class="menu-section">
                <h4>⚡ Actions rapides</h4>
                <button class="menu-item" data-action="toggleView">
                    <span class="menu-icon">🔄</span>
                    <span class="menu-text">Changer de vue</span>
                </button>
                <button class="menu-item" data-action="resetFilter">
                    <span class="menu-icon">🔍</span>
                    <span class="menu-text">Réinitialiser les filtres</span>
                </button>
            </div>
        </div>

        <div class="menu-footer">
            <p>📝 Développé par <strong>Siyaman Mohamad</strong></p>
        </div>
    </nav>

    <!-- Overlay pour fermer le menu -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>📅 Calendrier Master 1</h1>
            <p>Tes examens, CC et TPN en un coup d'œil</p>
        </div>

        <!-- Prochain examen avec timer -->
        <div class="card next-exam" id="nextExamCard">
            <h2>🎯 Prochain examen</h2>
            <div id="nextExamContent">
                <div class="empty-state">
                    <div class="icon">📚</div>
                    <p>Aucun examen programmé</p>
                </div>
            </div>
        </div>

        <!-- Filtres et vue -->
        <div class="card">
            <div style="display: flex; flex-direction: column; gap: 15px; align-items: center;">
                <!-- Filtre par UE -->
                <div class="filter-section">
                    <label for="ueFilter" style="font-weight: 600; margin-right: 10px;">🎯 Filtrer par UE:</label>
                    <select id="ueFilter" style="padding: 8px 12px; border-radius: 8px; border: 2px solid var(--border); background: var(--surface); color: var(--text); font-size: 0.9rem;">
                        <option value="">Toutes les UE</option>
                    </select>
                </div>
                
                <!-- Sélecteur de vue -->
                <div class="view-selector">
                    <button class="view-btn active" id="listViewBtn">📋 Liste</button>
                    <button class="view-btn" id="calendarViewBtn">📅 Calendrier</button>
                </div>
            </div>
        </div>

        <!-- Vue Liste -->
        <div class="card" id="listView">
            <h2>📋 Tous les examens</h2>
            <div id="examsList">
                <!-- Les examens seront affichés ici -->
            </div>
        </div>

        <!-- Vue Calendrier -->
        <div class="card" id="calendarView" style="display: none;">
            <div class="calendar-header">
                <button class="nav-btn" id="prevMonth">◀</button>
                <h2 id="currentMonth">Octobre 2025</h2>
                <button class="nav-btn" id="nextMonth">▶</button>
            </div>
            <div class="calendar-grid" id="calendarGrid">
                <!-- Le calendrier sera généré ici -->
            </div>
            <div class="calendar-legend">
                <div class="legend-item"><span class="legend-dot type-cc"></span> CC</div>
                <div class="legend-item"><span class="legend-dot type-examen"></span> Examen</div>
                <div class="legend-item"><span class="legend-dot type-tpn"></span> TPN</div>
                <div class="legend-item"><span class="legend-dot type-tp"></span> TP</div>
            </div>
        </div>
    </div>

    <!-- Modal pour les détails d'examen -->
    <div class="modal-overlay" id="examModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Détails de l'examen</h3>
                <button class="modal-close" id="modalClose">×</button>
            </div>
            <div class="modal-type" id="modalType">CC</div>
            <div class="modal-info" id="modalInfo">
                <!-- Les détails seront injectés ici -->
            </div>
            <div class="countdown-display" id="modalCountdown">
                <div class="countdown-label">Temps restant</div>
                <div class="countdown-value" id="modalCountdownValue">--</div>
            </div>
        </div>
    </div>

    <!-- Avertissement discret -->
    <div class="disclaimer">
        <p>📝 Développé par <strong>Siyaman Mohamad</strong> • Les dates peuvent être erronées ou prendre du temps à se mettre à jour (mise à jour manuelle)</p>
        <p class="last-update">🕒 Dernière mise à jour : <span id="lastUpdateDate">11 octobre 2025</span></p>
    </div>

    <!-- Scripts -->
    <script src="examManager.js"></script>
    <script src="calendarManager.js"></script>
    <script src="app.js"></script>
</body>
</html>